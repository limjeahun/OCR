/**
 * OCR 텍스트 교정 사전
 * 
 * 사업자등록증 도메인에 특화된 교정 규칙 및 N-gram 빈도 테이블
 */

// ============================================================
// 1. 문자 혼동 규칙 (Character Confusion Rules)
// ============================================================

/**
 * OCR에서 자주 발생하는 한글 문자 혼동 패턴
 * key: 잘못 인식된 문자, value: 올바른 문자 후보들 (빈도순)
 */
export const CHAR_CONFUSION: Record<string, string[]> = {
    // 자음 혼동
    '들': ['등', '틀'],
    '틀': ['등', '들'],
    '록': ['녹', '륙'],
    '녹': ['록'],
    '륙': ['록'],
    '번': ['빈', '분'],
    '빈': ['번'],
    '분': ['번'],
    '호': ['오', '흐'],
    '오': ['호'],
    // 모양 유사
    '명': ['몀', '멍'],
    '표': ['포', '뵤'],
    '내': ['대', '래'],
    '재': ['제', '채'],
    '소': ['스', '쇼'],
    // 날짜 관련
    '년': ['넌', '년'],
    '월': ['웰', '왈'],
    '일': ['인', '잉'],
};

/**
 * 한글-영어 혼동 (OCR이 한글을 영어로 잘못 인식)
 */
export const HANGUL_ENGLISH_CONFUSION: Record<string, string> = {
    'HOA': '충청남도',
    'HQA': '충청남도',
    'AST': '서북구',
    'AOE': '사업장',
    'SRUEAA': '주식회사',
};

/**
 * 숫자-문자 혼동
 */
export const NUMBER_CONFUSION: Record<string, string[]> = {
    '0': ['O', 'o', '영'],
    'O': ['0', '영'],
    'o': ['0', '영'],
    '1': ['I', 'l', '일'],
    'I': ['1', '일'],
    'l': ['1', '일'],
    '2': ['Z', 'z'],
    '5': ['S', 's'],
    '6': ['b'],
    '8': ['B'],
    '9': ['g', 'q'],
};

// ============================================================
// 2. 단어 수준 교정 사전 (Word-level Corrections)
// ============================================================

/**
 * 알려진 OCR 오류 패턴 → 올바른 단어
 */
export const WORD_CORRECTIONS: Record<string, string> = {
    // 법인등록번호 변형
    '법인들록번호': '법인등록번호',
    '법인동록번호': '법인등록번호',
    '번인등록번호': '법인등록번호',
    '법인등륙번호': '법인등록번호',
    '법인등록빈호': '법인등록번호',
    '법인등록번오': '법인등록번호',
    '법인등롤번호': '법인등록번호',  // 롤→록
    '일법인등록번호': '법인등록번호', // 일 prefix
    '일법인등롤번호': '법인등록번호', // 일 prefix + 롤
    // 등록번호 변형
    '등륵번호': '등록번호',
    '등록빈호': '등록번호',
    '등록번오': '등록번호',
    '홍록번호': '등록번호',
    '등롤번호': '등록번호',  // 롤→록
    // 대표자 변형
    '내표자': '대표자',
    '대포자': '대표자',
    '데표자': '대표자',
    '표자': '대표자',  // 대 누락
    // 소재지 변형
    '소제지': '소재지',
    '소재자': '소재지',
    // 개업연월일 변형
    '개업엽월일': '개업연월일',
    '개엽연월일': '개업연월일',
    '개업년월일': '개업연월일',
    // 법인명 변형
    '법인몀': '법인명',
    '번인명': '법인명',
    // 사업장 변형
    '사업쟝': '사업장',
    '사엽장': '사업장',
    // 본점 변형
    '본정': '본점',
    '분점': '본점',
};

// ============================================================
// 3. N-gram 빈도 테이블 (Domain-specific)
// ============================================================

/**
 * Bi-gram 빈도 (사업자등록증 도메인)
 * 0.0 ~ 1.0 사이 값, 높을수록 자주 등장
 */
export const BIGRAM_FREQ: Record<string, number> = {
    // 핵심 키워드
    '법인': 0.95,
    '등록': 0.92,
    '번호': 0.90,
    '대표': 0.88,
    '표자': 0.85,
    '소재': 0.82,
    '재지': 0.80,
    '개업': 0.78,
    '업연': 0.75,
    '연월': 0.75,
    '월일': 0.75,
    '사업': 0.72,
    '업장': 0.70,
    '본점': 0.68,
    '점소': 0.65,

    // 지역명
    '서울': 0.85,
    '특별': 0.82,
    '별시': 0.80,
    '광역': 0.78,
    '역시': 0.75,
    '경기': 0.72,
    '기도': 0.70,
    '충청': 0.68,
    '청남': 0.65,
    '남도': 0.62,

    // 오류 패턴 (낮은 빈도)
    '들록': 0.05,
    '등륙': 0.05,
    '내표': 0.08,
    '번오': 0.05,
    '빈호': 0.05,
};

/**
 * Tri-gram 빈도 (높은 확신도)
 */
export const TRIGRAM_FREQ: Record<string, number> = {
    '등록번': 0.95,
    '록번호': 0.93,
    '법인등': 0.92,
    '인등록': 0.90,
    '대표자': 0.88,
    '소재지': 0.85,
    '개업연': 0.82,
    '업연월': 0.80,
    '연월일': 0.78,
    '사업장': 0.75,
    '본점소': 0.72,
    '점소재': 0.70,

    // 오류 패턴
    '들록번': 0.05,
    '인들록': 0.05,
    '내표자': 0.08,
};

// ============================================================
// 4. 필드 키워드 사전 (Field Keywords)
// ============================================================

export const FIELD_KEYWORDS = [
    '등록번호',
    '법인등록번호',
    '법인명',
    '단체명',
    '상호',
    '대표자',
    '성명',
    '개업연월일',
    '소재지',
    '사업장소재지',
    '본점소재지',
    '주소',
];

// ============================================================
// 5. 지역명 사전 (Regions)
// ============================================================

export const REGIONS = [
    '서울특별시', '부산광역시', '대구광역시', '인천광역시', '광주광역시',
    '대전광역시', '울산광역시', '세종특별자치시',
    '경기도', '강원도', '충청북도', '충청남도', '전라북도', '전라남도',
    '경상북도', '경상남도', '제주특별자치도',
    '천안시', '서북구', '동남구', '아산시', '공주시', '보령시', '서산시',
    '논산시', '계룡시', '당진시', '남양주시',
    '금산군', '부여군', '서천군', '청양군', '홍성군', '예산군', '태안군',
];

// Set for O(1) lookup
export const REGION_SET = new Set(REGIONS);
